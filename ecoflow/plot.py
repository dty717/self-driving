a = ''
#input 0w usb off output 0w volume 6% lasting 03h23m

b = ''
#input 0w usb on output 0w volume 6% lasting 04h00m

c=''

# aList = [
#   '00000000000302010100000000000a0000000075010000010100000000000000000000211e000a0064130000005bc40000d9190000c1170000686700004b66370000000000ceb80300ab3601007e812200721000006be66a0000000000000000000000008800000008000000000000',
#   '00000000000302010100000000000a0000000078010000010100000000000000000000211e000a0064130000005bc40000d9190000c1170000686700004b66370000000000ceb80300ab3601007e812200721000006be66a0000000000000000000000008880000008000000000000',
#   '00000000000302010100000000000a0000000078010000010100000000000000000000211e000a0064130000005bc40000d9190000c1170000686700004b66370000000000ceb80300ab3601007e812200721000006be66a0000000000000000000000008880000008000000000000',
#   '00000000000302010100000000000a0000000076010000010100000000000000000000211e000a0064130000005bc40000d9190000c1170000686700004b66370000000000ceb80300ab3601007e812200721000006be66a0000000000000000000000008880000008000000000000',
#   '00000000000302010100000000000a000000006a010000010100000000000000000000211e000a0064130000005bc40000d9190000c1170000686700004b66370000000000ceb80300ab3601007e812200721000006be66a0000000000000000000000008880000008000000000000',
#   '00000000000302010100000000000a0000000063010000010100000000000000000000211e000a0064130000005bc40000d9190000c1170000686700004b66370000000000ceb80300ab3601007e812200721000006be66a0000000000000000000000008880000008000000000000',
#   '00000000000302010100000000000a0500000000010000010105000000000000000000211e000a0064130000005bc40000d9190000c1170000686700004d66370000000000ceb80300ab3601007e812200721000006be66a0000000000000000000000008880000008000000000000',
#   '00000000000302010100000000000a08000000ba000000010106000000000000000000211e000a0064130000005bc40000d9190000c1170000686700004d66370000000000ceb80300ab3601007e812200721000006be66a0000000000000000000000008880000008000000000000',
#   '00000000000302010100000000000a07000000ba000000010106000000000000000000211e000a0064130000005bc40000d9190000c1170000686700004e66370000000000ceb80300ab3601007e812200721000006be66a0000000000000000000000008880000008000000000000',
#   '00000000000302010100000000000a0800000089000000010107000000000000000000211e000a0064130000005bc40000d9190000c1170000686700004f66370000000000ceb80300ab3601007e812200721000006be66a0000000000000000000000008880000008000000000000',
#   '00000000000302010100000000000a0800000089000000010108000000000000000000211e000a0064130000005bc40000d9190000c1170000686700005066370000000000ceb80300ab3601007e812200721000006be66a0000000000000000000000008880000008000000000000',
#   '00000000000302010100000000000a0800000075000000010107000000000000000000211e000a0064130000005bc40000d9190000c1170000686700005066370000000000ceb80300ab3601007e812200721000006be66a0000000000000000000000008880000008000000000000',
#   '00000000000302010100000000000a0700000075000000010107000000000000000000211e000a0064130000005bc40000d9190000c1170000686700005166370000000000ceb80300ab3601007e812200721000006be66a0000000000000000000000008880000008000000000000',
#   '00000000000302010100000000000a070000006b000000010108000000000000000000211e000a0064130000005bc40000d9190000c1170000686700005266370000000000ceb80300ab3601007e812200721000006be66a0000000000000000000000008880000008000000000000',
#   '00000000000302010100000000000a0800000066000000010107000000000000000000211e000a0064130000005bc40000d9190000c1170000686700005366370000000000ceb80300ab3601007e812200721000006be66a0000000000000000000000008880000008000000000000',
#   '00000000000302010100000000000a0700000066000000010107000000000000000000211e000a0064130000005bc40000d9190000c1170000686700005466370000000000ceb80300ab3601007e812200721000006be66a0000000000000000000000008880000008000000000000',
#   '00000000000302010100000000000a0700000064000000010107000000000000000000211e000a0064130000005bc40000d9190000c1170000686700005566370000000000ceb80300ab3601007e812200721000006be66a0000000000000000000000008880000008000000000000'
# ]
aList = eval(open('state.txt','r').read())


def getListData(dataStr):
    hexString = ''.join(dataStr.split('\n'))
    listData = []
    for i in range(int(len(hexString)/2)):
        listData.append(float.fromhex(hexString[i*2:i*2+2]))
    return np.array(listData)

# aaList = aList
# [aList[0],aList[1]]

import numpy as np
import matplotlib.pyplot as plt
import matplotlib.animation as animation
# time temperature self voltage,solar voltage,output voltage,output current
# fig, ax = plt.subplots()

aaList = []
for aOne in aList:
    aaList.append(getListData(aOne))

x = np.arange(0, len(aaList[0]))

fig, ax = plt.subplots()
# ax.axis([0, max(width,height), 0, max(width,height)])
line, = ax.plot(x,aaList[0])

def animate(i):
    # print(aaList[i%len(aaList)])
    line.set_ydata(getListData(open('currentState.txt','r').read()))
#   line.set_ydata(aaList[i%len(aaList)])
    return line,


ani = animation.FuncAnimation(
    fig, animate, interval=500, blit=True, save_count=50)
plt.show()

